<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthTranscribe - AI-Powered Clinical Intelligence</title>
    <meta name="description" content="Enterprise healthcare transcription and clinical intelligence powered by Azure AI">
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <!-- Marked.js for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <img src="assets/logo.svg" alt="HealthTranscribe" class="logo-img">
                </div>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                    <svg class="sun-icon" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                        <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
                    </svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                        <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/>
                    </svg>
                </button>
            </div>
        </header>

        <main>
            <!-- Upload Section -->
            <section class="upload-section card">
                <div class="upload-header">
                    <div class="upload-title">
                        <div class="upload-title-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                                <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.91-3c-.49 0-.9.36-.98.85C16.52 14.2 14.47 16 12 16s-4.52-1.8-4.93-4.15c-.08-.49-.49-.85-.98-.85-.61 0-1.09.54-1 1.14.49 3 2.89 5.35 5.91 5.78V20c0 .55.45 1 1 1s1-.45 1-1v-2.08c3.02-.43 5.42-2.78 5.91-5.78.1-.6-.39-1.14-1-1.14z"/>
                            </svg>
                        </div>
                        <div>
                            <h2>Upload Audio Recording</h2>
                            <p class="upload-subtitle">Healthcare interview or clinical conversation</p>
                        </div>
                    </div>
                    <div class="upload-features">
                        <span class="feature-tag">
                            <svg viewBox="0 0 24 24" width="12" height="12" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                            Speech-to-Text
                        </span>
                        <span class="feature-tag">
                            <svg viewBox="0 0 24 24" width="12" height="12" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                            Medical NER
                        </span>
                        <span class="feature-tag">
                            <svg viewBox="0 0 24 24" width="12" height="12" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                            FHIR Export
                        </span>
                    </div>
                </div>
                
                <div class="upload-area" id="dropZone">
                    <div class="upload-area-content">
                        <div class="upload-icon-wrapper">
                            <div class="upload-icon-bg"></div>
                            <svg class="upload-icon-main" viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
                                <path d="M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z"/>
                            </svg>
                        </div>
                        <div class="upload-text">
                            <p class="upload-text-primary">Drop your audio file here</p>
                            <p class="upload-text-secondary">or <span class="upload-browse">browse</span> to choose a file</p>
                        </div>
                        <div class="upload-formats">
                            <span class="format-badge">WAV</span>
                            <span class="format-badge">MP3</span>
                            <span class="format-badge">OGG</span>
                            <span class="format-badge">FLAC</span>
                            <span class="format-badge">M4A</span>
                            <span class="format-badge">WMA</span>
                        </div>
                    </div>
                    <input type="file" id="fileInput" accept=".wav,.mp3,.ogg,.flac,.m4a,.wma" hidden>
                </div>
                
                <div class="selected-file" id="selectedFile" style="display: none;">
                    <div class="file-icon-wrapper">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"/>
                        </svg>
                    </div>
                    <div class="file-info">
                        <span class="file-name" id="fileName"></span>
                        <span class="file-size" id="fileSize"></span>
                    </div>
                    <button class="remove-btn" id="removeFile" aria-label="Remove file">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>
                        </svg>
                    </button>
                </div>
                
                <button class="primary-btn" id="uploadBtn" disabled>
                    <span class="btn-icon">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                            <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
                        </svg>
                    </span>
                    <span class="btn-text">Process Audio</span>
                    <span class="btn-loading" style="display: none;">
                        <span class="btn-spinner"></span>
                        Processing...
                    </span>
                </button>
            </section>

            <!-- Status Section -->
            <section class="status-section card" id="statusSection" style="display: none;">
                <div class="status-header">
                    <div class="status-title">
                        <svg class="status-icon" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <h2>Processing Your Audio</h2>
                    </div>
                    <span class="status-badge" id="statusBadge">In Progress</span>
                </div>
                
                <div class="status-progress-wrapper">
                    <div class="status-progress-bar">
                        <div class="status-progress-fill" id="statusProgressFill"></div>
                    </div>
                    <span class="status-progress-text" id="statusProgressText">0%</span>
                </div>
                
                <div class="status-steps">
                    <div class="status-step" data-step="upload">
                        <div class="step-icon-wrapper">
                            <div class="step-icon">
                                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                    <path d="M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z"/>
                                </svg>
                            </div>
                            <div class="step-connector"></div>
                        </div>
                        <div class="step-content">
                            <span class="step-label">Upload</span>
                            <span class="step-description">Sending audio file</span>
                        </div>
                    </div>
                    
                    <div class="status-step" data-step="transcribe">
                        <div class="step-icon-wrapper">
                            <div class="step-icon">
                                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                    <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.91-3c-.49 0-.9.36-.98.85C16.52 14.2 14.47 16 12 16s-4.52-1.8-4.93-4.15c-.08-.49-.49-.85-.98-.85-.61 0-1.09.54-1 1.14.49 3 2.89 5.35 5.91 5.78V20c0 .55.45 1 1 1s1-.45 1-1v-2.08c3.02-.43 5.42-2.78 5.91-5.78.1-.6-.39-1.14-1-1.14z"/>
                                </svg>
                            </div>
                            <div class="step-connector"></div>
                        </div>
                        <div class="step-content">
                            <span class="step-label">Transcribe</span>
                            <span class="step-description">Converting speech to text</span>
                        </div>
                    </div>
                    
                    <div class="status-step" data-step="analyze">
                        <div class="step-icon-wrapper">
                            <div class="step-icon">
                                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                    <path d="M19.5 3.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5zM19 19.09H5V4.91h14v14.18zM6 15h12v2H6v-2zm0-4h12v2H6v-2zm0-4h12v2H6V7z"/>
                                </svg>
                            </div>
                            <div class="step-connector"></div>
                        </div>
                        <div class="step-content">
                            <span class="step-label">Analyze</span>
                            <span class="step-description">Extracting medical entities</span>
                        </div>
                    </div>
                    
                    <div class="status-step" data-step="complete">
                        <div class="step-icon-wrapper">
                            <div class="step-icon">
                                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                                </svg>
                            </div>
                        </div>
                        <div class="step-content">
                            <span class="step-label">Complete</span>
                            <span class="step-description">Ready for review</span>
                        </div>
                    </div>
                </div>
                
                <div class="status-message-container">
                    <div class="status-spinner" id="statusSpinner"></div>
                    <p class="status-message" id="statusMessage">Initializing...</p>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <h2>Analysis Results</h2>
                
                <!-- Cost Savings Chip (subtle) -->
                <div class="cost-savings-chip" id="costSavingsBanner">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    <span class="chip-label">Azure Savings:</span>
                    <span class="chip-value" id="actualSavings">$0.00</span>
                    <span class="chip-divider">|</span>
                    <span class="chip-detail">
                        <span id="transcribemeCostActual">$0.00</span> â†’ <span id="azureCostActual">$0.00</span>
                    </span>
                    <span class="chip-detail-muted" id="savingsDetails">(0 min)</span>
                </div>
                
                <!-- Summary Cards -->
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="icon-primary"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>
                        </div>
                        <div class="card-value" id="processingTime">-</div>
                        <div class="card-label">Processing Time</div>
                    </div>
                    <div class="summary-card">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="icon-primary"><path d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z"/></svg>
                        </div>
                        <div class="card-value" id="speakerCount">-</div>
                        <div class="card-label">Speakers</div>
                    </div>
                    <div class="summary-card">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="icon-primary"><path d="M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4v4z"/></svg>
                        </div>
                        <div class="card-value" id="entityCount">-</div>
                        <div class="card-label">Medical Entities</div>
                    </div>
                    <div class="summary-card">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="icon-primary"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>
                        </div>
                        <div class="card-value" id="relationCount">-</div>
                        <div class="card-label">Relationships</div>
                    </div>
                    <div class="summary-card">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="#43a047"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>
                        </div>
                        <div class="card-value" id="linkedCount">-</div>
                        <div class="card-label">Linked to UMLS</div>
                    </div>
                </div>
                
                <!-- Assertion Detection Summary -->
                <div class="assertion-summary-bar" id="assertionSummaryBar" style="display: none;">
                    <div class="assertion-summary-title">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                        Assertion Detection
                    </div>
                    <div class="assertion-chips">
                        <div class="assertion-chip negated" id="chipNegated" style="display: none;">
                            <span class="chip-icon">âœ—</span>
                            <span class="chip-count" id="negatedCount">0</span>
                            <span class="chip-label">Negated</span>
                        </div>
                        <div class="assertion-chip hypothetical" id="chipHypothetical" style="display: none;">
                            <span class="chip-icon">âš¡</span>
                            <span class="chip-count" id="hypotheticalCount">0</span>
                            <span class="chip-label">Hypothetical</span>
                        </div>
                        <div class="assertion-chip conditional" id="chipConditional" style="display: none;">
                            <span class="chip-icon">â†”</span>
                            <span class="chip-count" id="conditionalCount">0</span>
                            <span class="chip-label">Conditional</span>
                        </div>
                        <div class="assertion-chip other-subject" id="chipOtherSubject" style="display: none;">
                            <span class="chip-icon">ðŸ‘¤</span>
                            <span class="chip-count" id="otherSubjectCount">0</span>
                            <span class="chip-label">Other Person</span>
                        </div>
                        <div class="assertion-chip temporal-past" id="chipTemporalPast" style="display: none;">
                            <span class="chip-icon">â—„</span>
                            <span class="chip-count" id="temporalPastCount">0</span>
                            <span class="chip-label">Past</span>
                        </div>
                        <div class="assertion-chip temporal-future" id="chipTemporalFuture" style="display: none;">
                            <span class="chip-icon">â–º</span>
                            <span class="chip-count" id="temporalFutureCount">0</span>
                            <span class="chip-label">Future</span>
                        </div>
                        <div class="assertion-chip uncertain" id="chipUncertain" style="display: none;">
                            <span class="chip-icon">?</span>
                            <span class="chip-count" id="uncertainCount">0</span>
                            <span class="chip-label">Uncertain</span>
                        </div>
                    </div>
                </div>

                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab active" data-tab="transcription">Transcription</button>
                    <button class="tab" data-tab="entities">Medical Entities</button>
                    <button class="tab" data-tab="relations">Relationships</button>
                    <button class="tab" data-tab="summary">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor" style="vertical-align: middle; margin-right: 4px;"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>AI Summary
                    </button>
                    <button class="tab" data-tab="fhir">FHIR Output</button>
                </div>

                <!-- Tab Content -->
                <div class="tab-content">
                    <div class="tab-pane active" id="transcriptionTab">
                        <div class="transcription-text" id="transcriptionText">
                            <p class="placeholder">Transcription will appear here...</p>
                        </div>
                    </div>
                    
                    <div class="tab-pane" id="entitiesTab">
                        <div class="entities-container" id="entitiesContainer">
                            <p class="placeholder">Medical entities will appear here...</p>
                        </div>
                    </div>
                    
                    <div class="tab-pane" id="relationsTab">
                        <div class="relations-container" id="relationsContainer">
                            <p class="placeholder">Relationships between medical entities will appear here...</p>
                        </div>
                    </div>
                    
                    <div class="tab-pane" id="summaryTab">
                        <div class="summary-header">
                            <div class="summary-title">
                                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="icon-primary"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
                                <h3>AI-Powered Clinical Summary</h3>
                            </div>
                            <div class="summary-actions">
                                <button class="secondary-btn pdf-btn" id="downloadPdf" disabled title="Download as PDF">
                                    <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z"/></svg>
                                    <span class="btn-text">Download PDF</span>
                                </button>
                                <button class="secondary-btn regenerate-btn" id="regenerateSummary" disabled>
                                    <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
                                    <span class="btn-text">Regenerate</span>
                                    <span class="cooldown-text" style="display: none;">Wait <span id="cooldownTimer">30</span>s</span>
                                </button>
                            </div>
                        </div>
                        <div class="summary-container" id="summaryContainer">
                            <div class="summary-loading" id="summaryLoading" style="display: none;">
                                <div class="loading-spinner"></div>
                                <p>Generating AI summary...</p>
                                <p class="loading-sub">Analyzing transcription and medical entities</p>
                            </div>
                            <div class="summary-content" id="summaryContent">
                                <p class="placeholder">Click "Generate Summary" or switch to this tab after processing to generate an AI-powered clinical summary.</p>
                            </div>
                            <div class="summary-error" id="summaryError" style="display: none;">
                                <svg viewBox="0 0 24 24" width="20" height="20" fill="#d32f2f"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                                <span id="summaryErrorText">Error generating summary</span>
                            </div>
                        </div>
                        <!-- PDF Error Toast -->
                        <div class="pdf-toast" id="pdfToast" style="display: none;">
                            <div class="toast-content">
                                <svg viewBox="0 0 24 24" width="20" height="20" fill="#d32f2f"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                                <span id="pdfToastMessage">PDF generation failed</span>
                            </div>
                            <div class="toast-actions">
                                <button class="toast-btn" id="downloadTxtFallback">Download as Text</button>
                                <button class="toast-dismiss" id="dismissToast">âœ•</button>
                            </div>
                        </div>
                        <div class="summary-footer" id="summaryFooter" style="display: none;">
                            <div class="summary-meta">
                                <span class="meta-item cached-badge" id="cachedBadge" style="display: none;">
                                    <svg viewBox="0 0 24 24" width="12" height="12" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                                    Cached
                                </span>
                                <span class="meta-item" id="generatedAt">Generated: -</span>
                                <span class="meta-item" id="summaryModel">Model: -</span>
                            </div>
                            <div class="token-usage">
                                <span class="token-label">Token Usage:</span>
                                <span class="token-value" id="promptTokens">Prompt: -</span>
                                <span class="token-value" id="completionTokens">Completion: -</span>
                                <span class="token-value" id="totalTokens">Total: -</span>
                                <span class="token-cost" id="estimatedCost">Est. Cost: -</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-pane" id="fhirTab">
                        <div class="fhir-actions">
                            <button class="secondary-btn" id="downloadFhir">
                                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 6px;"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>Download FHIR Bundle
                            </button>
                            <button class="secondary-btn" id="toggleFhirView">
                                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="vertical-align: middle; margin-right: 6px;" id="toggleFhirIcon"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg><span id="toggleFhirText">Show FHIR JSON</span>
                            </button>
                        </div>
                        <div class="fhir-output collapsed" id="fhirContainer">
                            <pre id="fhirOutput"><code>FHIR bundle will appear here...</code></pre>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <div class="footer-content">
                <div class="footer-brand">
                    <img src="assets/logo.svg" alt="HealthTranscribe" class="footer-logo">
                    <p class="footer-tagline">Enterprise-grade clinical intelligence powered by Azure AI</p>
                </div>
                <div class="footer-links">
                    <div class="footer-section">
                        <h4>Azure Services</h4>
                        <a href="https://learn.microsoft.com/azure/ai-services/speech-service/speech-to-text" target="_blank">Speech Services</a>
                        <a href="https://learn.microsoft.com/azure/ai-services/language-service/text-analytics-for-health/overview" target="_blank">Text Analytics for Health</a>
                        <a href="https://learn.microsoft.com/azure/ai-services/openai/overview" target="_blank">Azure OpenAI</a>
                    </div>
                    <div class="footer-section">
                        <h4>Standards</h4>
                        <a href="https://www.hl7.org/fhir/" target="_blank">HL7 FHIR R4</a>
                        <a href="https://learn.microsoft.com/azure/compliance/offerings/offering-hipaa-us" target="_blank">HIPAA Compliance</a>
                    </div>
                </div>
                <div class="footer-compliance">
                    <div class="compliance-badges">
                        <span class="compliance-badge">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                            </svg>
                            HIPAA Ready
                        </span>
                        <span class="compliance-badge">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                            SOC 2 Type II
                        </span>
                        <span class="compliance-badge">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            FHIR R4 Compatible
                        </span>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 HealthTranscribe Demo. Built with Azure AI Services.</p>
            </div>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
